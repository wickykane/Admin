<div class="modal-header">
    <span class="modal-title">CREATE NEW SITE</span>
    <button type="button" class="close" aria-label="Close" (click)="closeX()">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
<div class="modal-body">
    <fieldset class="custom-border">
        <legend class="custom-border">GENERAL INFORMATION</legend>
        <form [formGroup]="generalForm" class="form-search full-width form-horizontal">
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group row">
                        <label for="parent_company_name" class="col-sm-5 col-form-label">Parent Company Name</label>
                        <div class="col-sm-7">
                            <input type="text" readonly class="form-control-plaintext" name="parent_company_name" formControlName="parent_company_name">
                        </div>
                    </div>
                    <div class="w-100"></div>
                    <div class="form-group row">
                        <label for="code" class="col-sm-5 col-form-label">Site Code
                            <span class="text-danger">(*)</span>
                        </label>
                        <div class="col-sm-7">
                            <input type="text" class="form-control" name="code" [disabled]="true" formControlName="site_code">
                        </div>
                    </div>
                    <div class="w-100"></div>
                    <div class="form-group row">
                        <label for="full_name" class="col-sm-5 col-form-label">Site Name
                            <span class="text-danger">(*)</span>
                        </label>
                        <div class="col-sm-7">
                            <input type="text" class="form-control" name="full_name" formControlName="site_name">
                        </div>
                    </div>
                    <div class="w-100"></div>
                    <div class="form-group row">
                        <label for="payment_make" class="col-sm-5 col-form-label">Payment Made By
                            <span class="text-danger">(*)</span>
                        </label>
                        <div class="col-sm-7">
                            <select name="payment_make" (change)="changePayment($event)" formControlName="payment_make" class="form-control">
                                <option value="null" hidden="true" selected="true">--Select--</option>
                                <option value="0">Self-Pay</option>
                                <option value="1">Corporate Pay</option>
                            </select>
                        </div>
                    </div>
                    <div class="w-100"></div>
                    <div class="form-group row hidden">
                        <label for="registration" class="col-sm-5 col-form-label">Registration No</label>
                        <div class="col-sm-7">
                            <input type="text" class="form-control" name="registration" formControlName="credit_limit">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label for="registration" class="col-sm-5 col-form-label">Registration No</label>
                        <div class="col-sm-7">
                            <input type="text" class="form-control" name="registration" formControlName="registration_no">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="inputPassword" class="col-sm-5 col-form-label">Phone</label>
                        <div class="col-sm-7">
                            <input type="text" class="form-control" name="phone" formControlName="phone">
                        </div>
                    </div>
                    <div class="w-100"></div>
                    <div class="form-group row">
                        <label for="sale_person" class="col-sm-5 col-form-label">Fax</label>
                        <div class="col-sm-7">
                            <input type="text" class="form-control" name="fax" formControlName="fax">
                        </div>
                    </div>
                    <div class="w-100"></div>
                    <div class="form-group row">
                        <label for="sale_person_id" class="col-sm-5 col-form-label">Salesperson</label>
                        <div class="col-sm-7">
                            <select class="form-control" name="sale_person_id" formControlName="sale_person_id">
                                <option value="null" selected="true">--Select--</option>
                                <option *ngFor="let item of listMaster['salePersons']" [ngValue]="item.id">{{item.full_name}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label for="payment_term_id" class="col-sm-4 col-form-label" style="padding: 0">Default Payment Terms </label>
                        <div class="col-sm-8">
                            <select class="form-control" name="payment_term_id" formControlName="payment_term_id">
                                <option value="null" selected="true">--Select--</option>
                                <option *ngFor="let item of paymentTermList" [ngValue]="item.id">{{item.cd}} - {{item.des}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="payment_method_id" class="col-sm-4 col-form-label" style="padding: 0">Default Payment Methods</label>
                        <div class="col-sm-8">
                            <select class="form-control" name="payment_method_id" formControlName="payment_method_id">
                                <option value="null" selected="true">--Select--</option>
                                <option *ngFor="let item of paymentMethodList" [ngValue]="item.id">{{item.name}}</option>
                            </select>
                        </div>
                    </div>

                    <div class="w-100"></div>
                    <div class="form-group row">
                        <label for="credit_limit" class="col-sm-4 col-form-label" style="padding: 0">Taxable</label>
                        <div class="col-sm-8">
                            <select class="form-control" name="taxable" formControlName="taxable">
                                <option value="null" selected="true">--Select--</option>
                                <option value="1" selected="true">Yes</option>
                                <option value="0" selected="true">No</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </form>

    </fieldset>



    <div class="row" style="margin-top:15px;">
        <div class="col-sm-12">
            <div class="custom-header">
                <h3 class="custom-header">ADDRESS:
                    <strong class="text-danger">{{addresses.length}}</strong>
                    <span *ngIf="addresses.length > 1">Records</span>
                    <span *ngIf="addresses.length <= 1">Record</span>
                </h3>
                <div class="wrap-keyboard right-toggle-button" (click)="flagAddress = !flagAddress">
                    <span class="fa" [ngClass]="{'fa-minus': flagAddress,'fa-plus': !flagAddress}"></span>
                </div>
            </div>
            <div *ngIf="flagAddress">
                <div class="customer-content-toggle">
                    <table class="table table-striped table-vcenter table-hover custom-table">
                        <thead>
                            <tr>
                                <th> No </th>
                                <th> Type</th>
                                <th> Name
                                    <span class="text-danger">(*)</span>
                                </th>
                                <th> Country
                                    <span class="text-danger">(*)</span>
                                </th>
                                <th> Address 1
                                    <span class="text-danger">(*)</span>
                                </th>
                                <th> Address 2 </th>
                                <th> City
                                    <span class="text-danger">(*)</span>
                                </th>
                                <th> State
                                    <span class="text-danger">(*)</span>
                                </th>
                                <th> Zip Code
                                    <span class="text-danger">(*)</span>
                                </th>
                                <th>Default</th>
                                <th> Action </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let item of addresses; let i = index">
                                <td>{{i+1}}</td>
                                <td>
                                    <select class="form-control" name="type" (change)="checkIsDefault($event, i);updatePayment(item.type);checkAddress()" [(ngModel)]="item.type">
                                        <option value="null" selected="true">--Select--</option>
                                        <option *ngFor="let i of item.listType" [ngValue]="i.id">{{i.name}}</option>
                                    </select>
                                </td>
                                <td>
                                    <input type="text" class="form-control" (change)="updatePayment(item.type)" name="name" [(ngModel)]="item.name">
                                </td>
                                <td>
                                    <select class="form-control" name="country_code" [(ngModel)]="item.country_code" (change)="changeCountry(item);updatePayment(item.type)">
                                        <option value="null" selected="true">--Select--</option>
                                        <option *ngFor="let i of item.listCountry" [ngValue]="i.cd">{{i.name}}</option>
                                    </select>
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="address_1" (change)="updatePayment(item.type)" [(ngModel)]="item.address_1">
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="address_2" (change)="updatePayment(item.type)" [(ngModel)]="item.address_2">
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="city" (change)="updatePayment(item.type)" [(ngModel)]="item.city">
                                </td>
                                <td>
                                    <select class="form-control" name="state_id" [(ngModel)]="item.state_id" (change)="changeState($event.target.value, item);updatePayment(item.type)">
                                        <option value="null" selected="true">--Select--</option>
                                        <option *ngFor="let i of item.listState" [ngValue]="i.id">{{i.name}}</option>
                                    </select>
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="zip_code" (change)="updatePayment(item.type)" [(ngModel)]="item.zip_code">
                                </td>
                                <td>
                                    <input type="checkbox" name="is_default" (change)="checkIsDefault($event, i);updatePayment(item.type)" [(ngModel)]="item.is_default"
                                        [disabled]="item.type==3 || item.type==4">
                                </td>
                                <td>
                                    <button type="button" [disabled]="item.type==3||item.type==4" [hidden]="item.hidden!==undefined?item.hidden:true" class="btn btn-default" (click)="removeAddress(i)">
                                        <i class="fa fa-times" aria-hidden="true"></i>
                                    </button>
                                    <button type="button" class="btn btn-default" (click)="dupAddress(item.type)">
                                        <i class="fa fa-clone" aria-hidden="true"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <button type="button" class="btn btn-outline-dark" (click)="addNewAddress()">
                    <i class="fa fa-plus" aria-hidden="true"></i> Add new address</button>
            </div>
        </div>
    </div>




    <!-- <div class="row" style="margin-top:15px;">
        <div class="col-sm-12">
            <div class="custom-header">
                <h3 class="custom-header">BANK ACCOUNTS:
                    <strong class="text-danger">{{bank_accounts.length}}</strong>
                    <span *ngIf="bank_accounts.length > 1">Records</span>
                    <span *ngIf="bank_accounts.length <= 1">Record</span>
                </h3>
                <div class="wrap-keyboard right-toggle-button" (click)="flagAccount = !flagAccount">
                    <span class="fa" [ngClass]="{'fa-minus': flagAccount,'fa-plus': !flagAccount}"></span>
                </div>
            </div>
            <div *ngIf="flagAccount">
                <div class="customer-content-toggle">
                    <table class="table table-striped table-vcenter table-hover custom-table">
                        <thead>
                            <tr>
                                <th> No </th>
                                <th> Bank Name
                                    <span class="text-danger">(*)</span>
                                </th>
                                <th> SWIFT </th>
                                <th> Branch
                                    <span class="text-danger">(*)</span>
                                </th>
                                <th> Address </th>
                                <th> Account Name
                                    <span class="text-danger">(*)</span>
                                </th>
                                <th> Account No
                                    <span class="text-danger">(*)</span>
                                </th>
                                <th> IBAN </th>
                                <th> Action </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let item of bank_accounts; let i = index">
                                <td>{{i+1}}</td>
                                <td>
                                    <select class="form-control" name="bank_id" [(ngModel)]="item.bank_id" (change)="changeBank(item)">
                                        <option value="null" selected="true">--Select--</option>
                                        <option *ngFor="let i of item.listBank" [ngValue]="i.id">{{i.name}}</option>
                                    </select>
                                </td>
                                <td>
                                    <input type="text" readonly class="form-control-plaintext" name="bank_swift" [(ngModel)]="item.bank_swift">
                                </td>
                                <td>
                                    <select class="form-control" name="branch_id" [(ngModel)]="item.branch_id" (change)="changeBranch(item)">
                                        <option value="null" selected="true">--Select--</option>
                                        <option *ngFor="let i of item.listBranch" [ngValue]="i.id">{{i.branch_name}}</option>
                                    </select>
                                </td>
                                <td>
                                    <input type="text" readonly class="form-control-plaintext" name="full_address" [(ngModel)]="item.full_address">
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="account_name" [(ngModel)]="item.account_name">
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="account_no" [(ngModel)]="item.account_no">
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="iban" [(ngModel)]="item.iban">
                                </td>
                                <td>
                                    <button type="button" class="btn btn-default" (click)="removeBankAccount(i)">
                                        <i class="fa fa-times" aria-hidden="true"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <button type="button" class="btn btn-outline-dark" (click)="addNewBankAccount()">
                    <i class="fa fa-plus" aria-hidden="true"></i> Add new account</button>
            </div>
        </div>
    </div>

    <div class="row" style="margin-top:15px;">
        <div class="col-sm-12">
            <div class="custom-header">
                <h3 class="custom-header">CREDIT CARDS:
                    <strong class="text-danger">{{credit_cards.length}}</strong>
                    <span *ngIf="credit_cards.length > 1">Records</span>
                    <span *ngIf="credit_cards.length <= 1">Record</span>
                </h3>
                <div class="wrap-keyboard right-toggle-button" (click)="flagCreditCard = !flagCreditCard">
                    <span class="fa" [ngClass]="{'fa-minus': flagCreditCard,'fa-plus': !flagCreditCard}"></span>
                </div>
            </div>
            <div *ngIf="flagCreditCard">
                <div class="customer-content-toggle">
                    <table class="table table-striped table-vcenter table-hover custom-table">
                        <thead>
                            <tr>
                                <th> No </th>
                                <th> Card Type
                                    <span class="text-danger">(*)</span>
                                </th>
                                <th> Card Name
                                    <span class="text-danger">(*)</span>
                                </th>
                                <th> Card Number
                                    <span class="text-danger">(*)</span>
                                </th>
                                <th> Cvv
                                    <span class="text-danger">(*)</span>
                                </th>
                                <th> Expiration Month
                                    <span class="text-danger">(*)</span>
                                </th>
                                <th> Expiration Year
                                    <span class="text-danger">(*)</span>
                                </th>
                                <th> Action </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let item of credit_cards; let i = index" [ngClass]="{'hidden':item.is_deleted}">
                                <td>{{i+1}}</td>
                                <td>
                                    <select class="form-control" name="type" [(ngModel)]="item.type">
                                        <option value="null" selected="true">--Select--</option>
                                        <option *ngFor="let i of item.listCard" [ngValue]="i.id">{{i.name}}</option>
                                    </select>
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="name" [(ngModel)]="item.name">
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="no" [(ngModel)]="item.no">
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="cvv" [(ngModel)]="item.cvv">
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="expiration_month" [(ngModel)]="item.expiration_month">
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="expiration_year" [(ngModel)]="item.expiration_year">
                                </td>
                                <td>
                                    <button type="button" class="btn btn-default" (click)="removeCreditCard(i)">
                                        <i class="fa fa-times" aria-hidden="true"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <button type="button" class="btn btn-outline-dark" (click)="addNewCreditCard()">
                    <i class="fa fa-plus" aria-hidden="true"></i> Add new account</button>
            </div>
        </div>
    </div> -->



    <!-- <div class="row" style="margin-top:15px;" *ngIf="false">
        <div class="col-sm-12">
            <div class="custom-header">
                <h3 class="custom-header">BANK CARDS:
                    <strong class="text-danger">{{bank_card.length}}</strong>
                    <span *ngIf="bank_card.length > 1">Records</span>
                    <span *ngIf="bank_card.length <= 1">Record</span>
                </h3>
                <div class="wrap-keyboard right-toggle-button" (click)="flagCard = !flagCard">
                    <span class="fa" [ngClass]="{'fa-minus': flagCard,'fa-plus': !flagCard}"></span>
                </div>
            </div>
            <div *ngIf="flagCard">
                <div class="customer-content-toggle">
                    <table class="table table-striped table-vcenter table-hover custom-table">
                        <thead>
                            <tr>
                                <th> No </th>
                                <th> Card Type </th>
                                <th> Card No </th>
                                <th> Holder Name </th>
                                <th> Expiry Date </th>
                                <th> Action </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let item of bank_card; let i = index">
                                <td>{{i+1}}</td>
                                <td>
                                    <select class="form-control" name="card_type" [(ngModel)]="item.card_type">
                                        <option value="null" selected="true">--Select--</option>
                                        <option *ngFor="let i of item.listCardType" [ngValue]="i.id">{{i.name}}</option>
                                    </select>
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="card_no" [(ngModel)]="item.card_no">
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="holder" [(ngModel)]="item.holder">
                                </td>
                                <td>
                                    <div class="input-group">
                                        <input class="form-control" placeholder="yyyy-mm-dd" name="expiry_dt" [(ngModel)]="item.expiry_dt" ngbDatepicker #d="ngbDatepicker">
                                        <div class="input-group-append">
                                            <button class="btn btn-outline-secondary" (click)="d.toggle()" type="button">
                                                <i class="fa fa-calendar" aria-hidden="true"></i>
                                            </button>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <button type="button" class="btn btn-default" (click)="removeBankCard(i)">
                                        <i class="fa fa-times" aria-hidden="true"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <button type="button" class="btn btn-outline-dark" (click)="addNewBankCard()">
                    <i class="fa fa-plus" aria-hidden="true"></i> Add new bank card</button>
            </div>
        </div>
    </div> -->



    <div class="row" style="margin-top:15px;">
        <div class="col-sm-12">
            <div class="custom-header">
                <h3 class="custom-header">CONTACTS:
                    <strong class="text-danger">{{contacts.length}}</strong>
                    <span *ngIf="contacts.length > 1">Records</span>
                    <span *ngIf="contacts.length <= 1">Record</span>
                </h3>
                <div class="wrap-keyboard right-toggle-button" (click)="flagContact = !flagContact">
                    <span class="fa" [ngClass]="{'fa-minus': flagContact,'fa-plus': !flagContact}"></span>
                </div>
            </div>
            <div *ngIf="flagContact">
                <div class="customer-content-toggle">
                    <table class="table table-striped table-vcenter table-hover custom-table">
                        <thead>
                            <tr>
                                <th> No </th>
                                <th> Name
                                    <span class="text-danger">(*)</span>
                                </th>
                                <th> Title </th>
                                <th> Phone </th>
                                <th> Fax </th>
                                <th> Email
                                    <span class="text-danger">(*)</span>
                                </th>
                                <th> Username</th>
                                <th> Password </th>
                                <th> Action </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let item of contacts; let i = index">
                                <td>{{i+1}}</td>
                                <td>
                                    <input type="text" class="form-control" name="full_name" [(ngModel)]="item.name">
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="title" [(ngModel)]="item.title">
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="phone" [(ngModel)]="item.phone">
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="fax" [(ngModel)]="item.fax">
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="email" [(ngModel)]="item.email">
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="username" [(ngModel)]="item.username">
                                </td>
                                <td>
                                    <input type="password" class="form-control" name="pwd" [(ngModel)]="item.password">
                                </td>
                                <td>
                                    <button type="button" class="btn btn-default" (click)="removeContact(i)">
                                        <i class="fa fa-times" aria-hidden="true"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <button type="button" class="btn btn-outline-dark" (click)="addNewContact()">
                    <i class="fa fa-plus" aria-hidden="true"></i> Add new contacts</button>
            </div>
        </div>
    </div>







</div>
<div class="modal-footer">
    <button type="button" class="btn btn-outline-primary" (click)="applyData()">OK</button>
    <button type="button" class="btn btn-outline-dark" (click)="closeX()">Close</button>
</div>