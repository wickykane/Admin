<div [@routerTransition]>
    <app-page-header [heading]="'DETAIL BUYER'" [icon]="'fa-th-list'"></app-page-header>
    <section class="rma-page block">
        <div class="row" style="padding-top:15px">
            <div class="col-sm-12">
                <div class="block-header bg-gray-lighter">
                    <h3 class="block-title">GENERAL INFORMATION</h3>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <form [formGroup]="generalForm" class="form-search full-width form-horizontal">
                    <div class="row">
                        <div class="col-md-6">
                            <label for="buyer_type" class="control-label">Buyer Type</label>
                            <span class="text-danger">( * )</span>
                            <select class="form-control" formControlName="buyer_type">
                                <option value="null" selected="true">--Select--</option>
                                <option *ngFor="let item of listMaster['customerType']" [ngValue]="item.id">{{item.name}}</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="full_name" class="control-label">Buyer Name</label>
                            <span class="text-danger">( * )</span>
                            <input type="text" class="form-control" name="full_name" formControlName="full_name">
                        </div>
                        <div class="col-md-6">
                            <label for="phone" class="control-label">Phone</label>
                            <input type="text" class="form-control" name="phone" formControlName="phone">
                        </div>
                        <div class="col-md-6">
                            <label for="email" class="control-label">Email</label>
                            <span class="text-danger">( * )</span>
                            <input type="text" class="form-control" name="email" formControlName="email">
                        </div>
                        <div class="col-md-6">
                            <label for="fax" class="control-label">Fax</label>
                            <input type="text" class="form-control" name="fax" formControlName="fax">
                        </div>
                        <div class="col-md-6">
                            <label for="website" class="control-label">Website</label>
                            <input type="text" class="form-control" name="website" formControlName="website">
                        </div>
                        <!-- <div class="col-md-6">
                            <label for="sale_price_list" class="control-label">Sale Price List</label>
                            <select class="form-control" formControlName="sale_price_id">
                                <option value="null" selected="true">--Select--</option>
                                <option *ngFor="let item of listMaster['salePriceList']" [ngValue]="item.id">{{item.des}}</option>
                            </select>
                        </div> -->
                    </div>
                </form>
            </div>
            <div class="col-md-2">
                <div class="">
                    <div class="block-file">
                        <div>
                            <div class="">
                                <img style="height: inherit;" *ngIf="!imageSelected" src="./assets/images/icon-upload.jpg" alt="">
                                <img style="height: inherit;" *ngIf="imageSelected" src="{{imageSelected}}" alt="">
                            </div>
                        </div>
                        <label class="btn-bs-file  btn btn-outline-secondary">UPLOAD IMAGE
                            <input class="btn btn-default" id="file-to-upload" type="file" (change)="onFileChange($event)" accept="image/*">
                        </label>
                    </div>
                </div>
            </div>
        </div>


        <div class="row">
            <div class="col-md-12">
                <div class="row" style="padding-top:15px">
                    <div class="col-sm-12">
                        <div class="block-header bg-gray-lighter">
                            <h3 class="block-title">PRIMARY ADDRESS</h3>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <form [formGroup]="primaryForm" class="form-search full-width form-horizontal">
                            <div class="row">
                                <div class="col-md-3">
                                    <label for="name" class="control-label">Name</label>
                                    <input type="text" class="form-control" name="name" formControlName="label">
                                </div>
                                <div class="col-md-3">
                                    <label for="email" class="control-label">Email</label>
                                    <input type="text" class="form-control" name="email" formControlName="email">
                                </div>
                                <div class="col-md-3">
                                    <label for="tax_number" class="control-label">Fax Number</label>
                                    <input type="text" class="form-control" name="tax_number" formControlName="tax_number">
                                </div>
                                <div class="col-md-3">
                                    <label for="phone" class="control-label">Phone</label>
                                    <input type="text" class="form-control" name="phone" formControlName="phone">
                                </div>
                                <div class="col-md-3">
                                    <label for="address_line" class="control-label">Address Line
                                        <span class="text-danger">( * )</span>
                                    </label>
                                    <input type="text" class="form-control" name="address_line" formControlName="address_line">
                                </div>
                                <div class="col-md-3">
                                    <label for="country_code" class="control-label">Country
                                        <span class="text-danger">( * )</span>
                                    </label>
                                    <select class="form-control" formControlName="country_code" (change)="changeCountry(this.primaryForm.value.country_code ,'states_primary')">
                                        <option value="null" selected="true">--Select--</option>
                                        <option *ngFor="let item of listMaster['countries']" [ngValue]="item.cd">{{item.name}}</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <label for="city_name" class="control-label">City
                                        <span class="text-danger">( * )</span>
                                    </label>
                                    <input type="text" class="form-control" name="city_name" formControlName="city_name">
                                </div>
                                <div class="col-md-3">
                                    <label for="state_id" class="control-label">State/Province</label>
                                    <select class="form-control" formControlName="state_id">
                                        <option value="null" selected="true">--Select--</option>
                                        <option *ngFor="let item of listMaster['states_primary']" [ngValue]="item.id">{{item.name}}</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <label for="zip_code" class="control-label">Zip/Postal Code
                                        <span class="text-danger">( * )</span>
                                    </label>
                                    <input type="text" class="form-control" name="zip_code" formControlName="zip_code">
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-md-12">
                <div class="row" style="padding-top:15px">
                    <div class="col-sm-12">
                        <div class="block-header bg-gray-lighter">
                            <h3 class="block-title">CREDIT ACCOUNT</h3>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <form [formGroup]="generalForm" class="form-search full-width form-horizontal">
                            <div class="col-md-3">
                                <label for="name" class="control-label">Status</label>
                                <span class="text-danger">( * )</span>
                                <select class="form-control" formControlName="credit_sts">
                                    <option value="null" selected="true">--Select--</option>
                                    <option *ngFor="let item of listMaster['creditStatus']" [ngValue]="item.id">{{item.name}}</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label for="line_of_credit" class="control-label">Line Of Credit</label>
                                <span class="text-danger">( * )</span>
                                <input type="text" class="form-control" name="line_of_credit" formControlName="line_of_credit">
                            </div>
                            <div class="col-md-3" *ngIf="this.generalForm.value.credit_sts==1 || this.generalForm.value.credit_sts==3">
                                <label for="credit_reason" class="control-label">Reason</label>
                                <span class="text-danger">( * )</span>
                                <textarea rows="4" class="form-control" name="credit_reason" formControlName="credit_reason" style="resize: none;"></textarea>
                            </div>
                        </form>
                    </div>
                </div>

            </div>
        </div>

        <div class="row" style="padding-top:15px">
            <div class="col-sm-12">
                <div class="block-header bg-gray-lighter">
                    <h3 class="block-title">BILLING & SHIPPING ADDRESSES</h3>
                </div>
            </div>
        </div>
        <div class="row" style="margin-bottom: 20px;margin-top: 10px;">
            <div class="col-sm-12">
                <div class="block-content">
                    <table class="table table-striped table-vcenter table-hover custom-table">
                        <thead>
                            <tr>
                                <th>Type</th>
                                <th>Code</th>
                                <th>Name</th>
                                <th>Address</th>
                                <th>City</th>
                                <th>State</th>
                                <th>Zip</th>
                                <th>Country</th>
                                <th>Phone</th>
                                <th>Fax</th>
                                <th>Email</th>
                                <th>
                                    <div class="pull-right">
                                        <!-- <a class="btn  btn-danger" (click)="deleteAddr()" >Delete</a> -->
                                        <button [disabled]="(removedList.length <= 0)" type="button" class="btn btn-danger" (click)="deleteAddr()">Delete</button>
                                        <!-- <a href="" class="btn btn-danger btn-default" (click)="deleteAllAddr()">Delete All</a> -->
                                    </div>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let item of addressList; let i = index">
                                <td>{{ADDRESS_TYPE[item.type]}}</td>
                                <td>{{item.label}}</td>
                                <td>{{item.address_name}}</td>
                                <td>{{item.address_line}}</td>
                                <td>
                                    {{item.city_name}}
                                </td>
                                <td>
                                    <ng-container *ngFor="let state of listMaster['states']">
                                        <span *ngIf="state.id == item.state_id">{{state.name}}</span>
                                    </ng-container>
                                </td>
                                <td>{{item.zip_code}}</td>
                                <td>
                                    <ng-container *ngFor="let country of listMaster['countries']">
                                        <span *ngIf="country.cd == item.country_code">{{country.name}}</span>
                                    </ng-container>
                                </td>
                                <td>{{item.phone}}</td>
                                <td>{{item.tax_number}}</td>
                                <td>{{item.email}}</td>
                                <td align="center">
                                    <a class="btn btn-default" (click)="updateAddress(item, i)">
                                        <i class="fa fa-pencil"></i>
                                    </a>

                                    <label class="css-input css-checkbox css-checkbox-default">
                                        <input class="cb-element cd-{{item.id}}" type="checkbox" [(ngModel)]="item.isChecked" (change)="checkItemChecked(item)">
                                        <span></span>
                                    </label>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="12">
                                    <button type="button" class="btn btn-primary" (click)="addNewAddress()">
                                        <i class="fa fa-plus" aria-hidden="true"></i> Add new address</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- <div class="row" style="padding-top:15px">
            <div class="col-sm-12">
                <div class="block-header bg-gray-lighter">
                    <h3 class="block-title">USER LIST</h3>
                </div>
            </div>
        </div>
        <div class="row" style="margin-bottom: 20px;margin-top: 10px;">
            <div class="col-sm-12">
                <div class="block-content">
                    <table class="table table-striped table-vcenter table-hover custom-table">
                        <thead>
                            <tr>
                                <th> No </th>
                                <th> Email </th>
                                <th> User Name </th>
                                <th> Password </th>
                                <th> Confirm Password </th>
                                <th> First Name </th>
                                <th> Last Name </th>
                                <th> Full Name </th>
                                <th> Phone 1 </th>
                                <th> Phone 2 </th>
                                <th> Action </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let item of users; let i = index">
                                <td>{{i+1}}</td>
                                <td>
                                    <input type="text" class="form-control" name="email" [(ngModel)]="item.email">
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="username" [(ngModel)]="item.username">
                                </td>
                                <td>
                                    <input type="password" class="form-control" name="password" [(ngModel)]="item.password">
                                </td>
                                <td>
                                    <input type="password" class="form-control" name="password_confirm" [(ngModel)]="item.password_confirm">
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="first_name" [(ngModel)]="item.first_name">
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="last_name" [(ngModel)]="item.last_name">
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="full_name" [(ngModel)]="item.full_name">
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="phone" [(ngModel)]="item.phone">
                                </td>
                                <td>
                                    <input type="text" class="form-control" name="phone2" [(ngModel)]="item.phone2">
                                </td>
                                <td>
                                    <button type="button" class="btn btn-default" (click)="removeLine(i)">
                                        <i class="fa fa-times" aria-hidden="true"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="11">
                                    <button type="button" class="btn btn-primary" (click)="addNewLine()">
                                        <i class="fa fa-plus" aria-hidden="true"></i> Add new line</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div> -->

        <div class="block-content block-content-full text-right">
            <button type="button" class="btn btn-default" [routerLink]="['/customer']">Cancel</button>
            <button type="button" [disabled]="generalForm.invalid" class="btn btn-primary" (click)="actionUpdate(addressList)">Save</button>
        </div>
    </section>
</div>